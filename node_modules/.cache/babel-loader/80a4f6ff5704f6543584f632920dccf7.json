{"ast":null,"code":"module.exports = Event;\n\nfunction Event() {\n  var listeners = [];\n  return {\n    broadcast: broadcast,\n    listen: event\n  };\n\n  function broadcast(value) {\n    var listenersCopy = listeners.slice();\n\n    for (var i = 0; i < listenersCopy.length; i++) {\n      if (!listenersCopy[i].deleted) {\n        listenersCopy[i].fn(value);\n      }\n    }\n  }\n\n  function event(listener) {\n    listeners.push(new ListItem(listener));\n    return removeListener;\n\n    function removeListener() {\n      for (var i = 0; i < listeners.length; i++) {\n        if (listeners[i].fn === listener) {\n          listeners[i].deleted = true;\n          listeners.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n}\n\nfunction ListItem(fn) {\n  this.fn = fn;\n  this.deleted = false;\n}","map":{"version":3,"sources":["/home/amax/Autoro/cabana/node_modules/geval/event.js"],"names":["module","exports","Event","listeners","broadcast","listen","event","value","listenersCopy","slice","i","length","deleted","fn","listener","push","ListItem","removeListener","splice"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiBC,KAAjB;;AACA,SAASA,KAAT,GAAiB;AACb,MAAIC,SAAS,GAAG,EAAhB;AAEA,SAAO;AAAEC,IAAAA,SAAS,EAAEA,SAAb;AAAwBC,IAAAA,MAAM,EAAEC;AAAhC,GAAP;;AAEA,WAASF,SAAT,CAAmBG,KAAnB,EAA0B;AACtB,QAAIC,aAAa,GAAGL,SAAS,CAACM,KAAV,EAApB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,aAAa,CAACG,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;AAC3C,UAAI,CAACF,aAAa,CAACE,CAAD,CAAb,CAAiBE,OAAtB,EAA+B;AAC3BJ,QAAAA,aAAa,CAACE,CAAD,CAAb,CAAiBG,EAAjB,CAAoBN,KAApB;AACH;AACJ;AACJ;;AAED,WAASD,KAAT,CAAeQ,QAAf,EAAyB;AACrBX,IAAAA,SAAS,CAACY,IAAV,CAAe,IAAIC,QAAJ,CAAaF,QAAb,CAAf;AAEA,WAAOG,cAAP;;AAEA,aAASA,cAAT,GAA0B;AACtB,WAAK,IAAIP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,SAAS,CAACQ,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,YAAIP,SAAS,CAACO,CAAD,CAAT,CAAaG,EAAb,KAAoBC,QAAxB,EAAkC;AAC9BX,UAAAA,SAAS,CAACO,CAAD,CAAT,CAAaE,OAAb,GAAuB,IAAvB;AACAT,UAAAA,SAAS,CAACe,MAAV,CAAiBR,CAAjB,EAAoB,CAApB;AACA;AACH;AACJ;AACJ;AACJ;AACJ;;AAED,SAASM,QAAT,CAAkBH,EAAlB,EAAsB;AAClB,OAAKA,EAAL,GAAUA,EAAV;AACA,OAAKD,OAAL,GAAe,KAAf;AACH","sourcesContent":["module.exports = Event\nfunction Event() {\n    var listeners = []\n\n    return { broadcast: broadcast, listen: event }\n\n    function broadcast(value) {\n        var listenersCopy = listeners.slice()\n        for (var i = 0; i < listenersCopy.length; i++) {\n            if (!listenersCopy[i].deleted) {\n                listenersCopy[i].fn(value)\n            }\n        }\n    }\n\n    function event(listener) {\n        listeners.push(new ListItem(listener))\n\n        return removeListener\n\n        function removeListener() {\n            for (var i = 0; i < listeners.length; i++) {\n                if (listeners[i].fn === listener) {\n                    listeners[i].deleted = true\n                    listeners.splice(i, 1)\n                    break\n                }\n            }\n        }\n    }\n}\n\nfunction ListItem(fn) {\n    this.fn = fn\n    this.deleted = false\n}\n"]},"metadata":{},"sourceType":"script"}