{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RequestError = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _queryString = require('query-string');\n\nvar _queryString2 = _interopRequireDefault(_queryString);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar RequestError = exports.RequestError = function (_Error) {\n  (0, _inherits3.default)(RequestError, _Error);\n\n  function RequestError(resp) {\n    var _ref;\n\n    (0, _classCallCheck3.default)(this, RequestError);\n\n    for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = RequestError.__proto__ || (0, _getPrototypeOf2.default)(RequestError)).call.apply(_ref, [this].concat(params)));\n\n    _this.resp = resp;\n    return _this;\n  }\n\n  return RequestError;\n}(Error);\n\nvar ConfigRequest = function () {\n  function ConfigRequest(baseUrl) {\n    (0, _classCallCheck3.default)(this, ConfigRequest);\n    this.defaultHeaders = {\n      'Content-Type': 'application/json'\n    };\n    this.baseUrl = baseUrl + (!baseUrl.endsWith('/') ? '/' : '');\n  }\n\n  (0, _createClass3.default)(ConfigRequest, [{\n    key: 'configure',\n    value: function configure(accessToken) {\n      if (accessToken) {\n        this.defaultHeaders['Authorization'] = 'JWT ' + accessToken;\n      }\n    }\n  }, {\n    key: 'request',\n    value: function () {\n      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(method, path, params, data_json, resp_json) {\n        var headers, requestUrl, body, resp, error;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (data_json !== false) {\n                  data_json = true;\n                }\n\n                if (resp_json !== false) {\n                  resp_json = true;\n                }\n\n                headers = (0, _extends3.default)({}, this.defaultHeaders);\n\n                if (!data_json) {\n                  headers['Content-Type'] = 'application/x-www-form-urlencoded';\n                }\n\n                requestUrl = this.baseUrl + path;\n                body = undefined;\n\n                if (params && (0, _keys2.default)(params).length !== 0) {\n                  if (method === 'GET' || method === 'HEAD') {\n                    requestUrl += '?' + _queryString2.default.stringify(params);\n                  } else if (data_json) {\n                    body = (0, _stringify2.default)(params);\n                  } else {\n                    body = _queryString2.default.stringify(params);\n                  }\n                }\n\n                _context.next = 9;\n                return fetch(requestUrl, {\n                  method: method,\n                  headers: headers,\n                  body: body\n                });\n\n              case 9:\n                resp = _context.sent;\n\n                if (resp.ok) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 13;\n                return resp.text();\n\n              case 13:\n                error = _context.sent;\n                throw new RequestError(resp, resp.status + ': ' + error);\n\n              case 15:\n                if (resp_json) {\n                  _context.next = 17;\n                  break;\n                }\n\n                return _context.abrupt('return', resp);\n\n              case 17:\n                _context.next = 19;\n                return resp.json();\n\n              case 19:\n                return _context.abrupt('return', _context.sent);\n\n              case 20:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function request(_x, _x2, _x3, _x4, _x5) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n  return ConfigRequest;\n}();\n\nexports.default = ConfigRequest;\n['GET', 'POST', 'PUT', 'PATCH', 'HEAD', 'DELETE'].forEach(function (method) {\n  var methodName = method.toLowerCase();\n\n  ConfigRequest.prototype[methodName] = function () {\n    var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(path, params, data_json, resp_json) {\n      return _regenerator2.default.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.request(method, path, params, data_json, resp_json);\n\n            case 2:\n              return _context2.abrupt('return', _context2.sent);\n\n            case 3:\n            case 'end':\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    return function (_x6, _x7, _x8, _x9) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n});","map":{"version":3,"sources":["/home/amax/Autoro/cabana/node_modules/@commaai/comma-api/dist/instance.js"],"names":["Object","defineProperty","exports","value","RequestError","undefined","_regenerator","require","_regenerator2","_interopRequireDefault","_stringify","_stringify2","_keys","_keys2","_extends2","_extends3","_asyncToGenerator2","_asyncToGenerator3","_createClass2","_createClass3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_queryString","_queryString2","obj","__esModule","default","_Error","resp","_ref","_len","arguments","length","params","Array","_key","_this","__proto__","call","apply","concat","Error","ConfigRequest","baseUrl","defaultHeaders","endsWith","key","configure","accessToken","_ref2","mark","_callee","method","path","data_json","resp_json","headers","requestUrl","body","error","wrap","_callee$","_context","prev","next","stringify","fetch","sent","ok","text","status","abrupt","json","stop","request","_x","_x2","_x3","_x4","_x5","forEach","methodName","toLowerCase","prototype","_ref3","_callee2","_callee2$","_context2","_x6","_x7","_x8","_x9"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RequestError = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _queryString = require('query-string');\n\nvar _queryString2 = _interopRequireDefault(_queryString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RequestError = exports.RequestError = function (_Error) {\n  (0, _inherits3.default)(RequestError, _Error);\n\n  function RequestError(resp) {\n    var _ref;\n\n    (0, _classCallCheck3.default)(this, RequestError);\n\n    for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (_ref = RequestError.__proto__ || (0, _getPrototypeOf2.default)(RequestError)).call.apply(_ref, [this].concat(params)));\n\n    _this.resp = resp;\n    return _this;\n  }\n\n  return RequestError;\n}(Error);\n\nvar ConfigRequest = function () {\n  function ConfigRequest(baseUrl) {\n    (0, _classCallCheck3.default)(this, ConfigRequest);\n\n    this.defaultHeaders = {\n      'Content-Type': 'application/json'\n    };\n    this.baseUrl = baseUrl + (!baseUrl.endsWith('/') ? '/' : '');\n  }\n\n  (0, _createClass3.default)(ConfigRequest, [{\n    key: 'configure',\n    value: function configure(accessToken) {\n      if (accessToken) {\n        this.defaultHeaders['Authorization'] = 'JWT ' + accessToken;\n      }\n    }\n  }, {\n    key: 'request',\n    value: function () {\n      var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(method, path, params, data_json, resp_json) {\n        var headers, requestUrl, body, resp, error;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (data_json !== false) {\n                  data_json = true;\n                }\n                if (resp_json !== false) {\n                  resp_json = true;\n                }\n\n                headers = (0, _extends3.default)({}, this.defaultHeaders);\n\n                if (!data_json) {\n                  headers['Content-Type'] = 'application/x-www-form-urlencoded';\n                }\n\n                requestUrl = this.baseUrl + path;\n                body = undefined;\n\n                if (params && (0, _keys2.default)(params).length !== 0) {\n                  if (method === 'GET' || method === 'HEAD') {\n                    requestUrl += '?' + _queryString2.default.stringify(params);\n                  } else if (data_json) {\n                    body = (0, _stringify2.default)(params);\n                  } else {\n                    body = _queryString2.default.stringify(params);\n                  }\n                }\n\n                _context.next = 9;\n                return fetch(requestUrl, { method: method, headers: headers, body: body });\n\n              case 9:\n                resp = _context.sent;\n\n                if (resp.ok) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 13;\n                return resp.text();\n\n              case 13:\n                error = _context.sent;\n                throw new RequestError(resp, resp.status + ': ' + error);\n\n              case 15:\n                if (resp_json) {\n                  _context.next = 17;\n                  break;\n                }\n\n                return _context.abrupt('return', resp);\n\n              case 17:\n                _context.next = 19;\n                return resp.json();\n\n              case 19:\n                return _context.abrupt('return', _context.sent);\n\n              case 20:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function request(_x, _x2, _x3, _x4, _x5) {\n        return _ref2.apply(this, arguments);\n      }\n\n      return request;\n    }()\n  }]);\n  return ConfigRequest;\n}();\n\nexports.default = ConfigRequest;\n\n\n['GET', 'POST', 'PUT', 'PATCH', 'HEAD', 'DELETE'].forEach(function (method) {\n  var methodName = method.toLowerCase();\n  ConfigRequest.prototype[methodName] = function () {\n    var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(path, params, data_json, resp_json) {\n      return _regenerator2.default.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.request(method, path, params, data_json, resp_json);\n\n            case 2:\n              return _context2.abrupt('return', _context2.sent);\n\n            case 3:\n            case 'end':\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    return function (_x6, _x7, _x8, _x9) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n});"]},"metadata":{},"sourceType":"script"}