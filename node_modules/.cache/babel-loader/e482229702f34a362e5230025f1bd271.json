{"ast":null,"code":"// Vendored from https://github.com/rapid7/le_js, which is broken with webpack.\n\n/* eslint-disable */\nif (typeof window === \"undefined\") {\n  // eslint-disable-line no-use-before-define\n  var window = self;\n}\n\nvar _indexOf = function (array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (obj === array[i]) {\n      return i;\n    }\n  }\n\n  return -1;\n}; // Obtain a browser-specific XHR object\n\n\nvar _getAjaxObject = function () {\n  if (typeof XDomainRequest !== \"undefined\") {\n    // We're using IE8/9\n    return new XDomainRequest();\n  }\n\n  return new XMLHttpRequest();\n};\n/**\n * A single log event stream.\n * @constructor\n * @param {Object} options\n */\n\n\nfunction LogStream(options) {\n  /**\n   * @const\n   * @type {string} */\n  var _traceCode = options.trace ? (Math.random() + Math.PI).toString(36).substring(2, 10) : null;\n  /** @type {string} */\n\n\n  var _pageInfo = options.page_info;\n  /** @type {string} */\n\n  var _token = options.token;\n  /** @type {boolean} */\n\n  var _print = options.print;\n  /** @type {boolean} */\n\n  var _noFormat = options.no_format;\n  /** @type {boolean} */\n\n  var _SSL = function () {\n    if (typeof XDomainRequest === \"undefined\") {\n      return options.ssl;\n    } // If we're relying on XDomainRequest, we\n    // must adhere to the page's encryption scheme.\n\n\n    return window.location.protocol === \"https:\" ? true : false;\n  }();\n  /** @type {string} */\n\n\n  var _endpoint;\n\n  if (window.LEENDPOINT) {\n    _endpoint = window.LEENDPOINT;\n  } else if (_noFormat) {\n    _endpoint = \"webhook.logentries.com/noformat\";\n  } else {\n    _endpoint = \"js.logentries.com/v1\";\n  }\n\n  _endpoint = (_SSL ? \"https://\" : \"http://\") + _endpoint + \"/logs/\" + _token;\n  /**\n   * Flag to prevent further invocations on network err\n   ** @type {boolean} */\n\n  var _shouldCall = true;\n  /** @type {Array.<string>} */\n\n  var _backlog = [];\n  /** @type {boolean} */\n\n  var _active = false;\n  /** @type {boolean} */\n\n  var _sentPageInfo = false;\n\n  var _apiCall = function (token, data) {\n    _active = true;\n\n    var request = _getAjaxObject();\n\n    if (_shouldCall) {\n      if (request.constructor === XMLHttpRequest) {\n        // Currently we don't support fine-grained error\n        // handling in older versions of IE\n        request.onreadystatechange = function () {\n          if (request.readyState === 4) {\n            // Handle any errors\n            if (request.status >= 400) {\n              console.error(\"Couldn't submit events.\");\n\n              if (request.status === 410) {\n                // This API version has been phased out\n                console.warn(\"This version of le_js is no longer supported!\");\n              }\n            } else {\n              if (request.status === 301) {\n                // Server issued a deprecation warning\n                console.warn(\"This version of le_js is deprecated! Consider upgrading.\");\n              }\n\n              if (_backlog.length > 0) {\n                // Submit the next event in the backlog\n                _apiCall(token, _backlog.shift());\n              } else {\n                _active = false;\n              }\n            }\n          }\n        };\n      } else {\n        request.onload = function () {\n          if (_backlog.length > 0) {\n            // Submit the next event in the backlog\n            _apiCall(token, _backlog.shift());\n          } else {\n            _active = false;\n          }\n        };\n      }\n\n      request.open(\"POST\", _endpoint, true);\n\n      if (request.constructor === XMLHttpRequest) {\n        request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        request.setRequestHeader(\"Content-type\", \"application/json\");\n      }\n\n      if (request.overrideMimeType) {\n        request.overrideMimeType(\"text\");\n      }\n\n      request.send(data);\n    }\n  };\n\n  var _getEvent = function () {\n    var raw = null;\n    var args = Array.prototype.slice.call(arguments);\n\n    if (args.length === 0) {\n      throw new Error(\"No arguments!\");\n    } else if (args.length === 1) {\n      raw = args[0];\n    } else {\n      // Handle a variadic overload,\n      // e.g. _rawLog(\"some text \", x, \" ...\", 1);\n      raw = args;\n    }\n\n    return raw;\n  };\n\n  var _agentInfo = function () {\n    var nav = window.navigator || {\n      doNotTrack: undefined\n    };\n    var screen = window.screen || {};\n    var location = window.location || {};\n    return {\n      url: location.pathname,\n      referrer: document.referrer,\n      screen: {\n        width: screen.width,\n        height: screen.height\n      },\n      window: {\n        width: window.innerWidth,\n        height: window.innerHeight\n      },\n      browser: {\n        name: nav.appName,\n        version: nav.appVersion,\n        cookie_enabled: nav.cookieEnabled,\n        do_not_track: nav.doNotTrack\n      },\n      platform: nav.platform\n    };\n  }; // Single arg stops the compiler arity warning\n\n\n  var _rawLog = function (msg) {\n    var event = _getEvent.apply(this, arguments);\n\n    var data = {\n      event: event\n    }; // Add agent info if required\n\n    if (_pageInfo !== \"never\") {\n      if (!_sentPageInfo || _pageInfo === \"per-entry\") {\n        _sentPageInfo = true;\n        if (typeof event.screen === \"undefined\" && typeof event.browser === \"undefined\") _rawLog(_agentInfo()).level(\"PAGE\").send();\n      }\n    }\n\n    if (_traceCode) {\n      data.trace = _traceCode;\n    }\n\n    return {\n      level: function (l) {\n        // Don't log PAGE events to console\n        // PAGE events are generated for the agentInfo function\n        if (_print && typeof console !== \"undefined\" && l !== \"PAGE\") {\n          var serialized = null;\n\n          if (typeof XDomainRequest !== \"undefined\") {\n            // We're using IE8/9\n            serialized = data.trace + \" \" + data.event;\n          }\n\n          try {\n            console[l.toLowerCase()].call(console, serialized || data);\n          } catch (ex) {\n            // IE compat fix\n            console.log(serialized || data);\n          }\n        }\n\n        data.level = l;\n        return {\n          send: function () {\n            var cache = [];\n            var serialized = JSON.stringify(data, function (key, value) {\n              if (typeof value === \"undefined\") {\n                return \"undefined\";\n              } else if (typeof value === \"object\" && value !== null) {\n                if (_indexOf(cache, value) !== -1) {\n                  // We've seen this object before;\n                  // return a placeholder instead to prevent\n                  // cycles\n                  return \"<?>\";\n                }\n\n                cache.push(value);\n              }\n\n              return value;\n            });\n\n            if (_active) {\n              _backlog.push(serialized);\n            } else {\n              _apiCall(_token, serialized);\n            }\n          }\n        };\n      }\n    };\n  };\n\n  if (options.catchall) {\n    var oldHandler = window.onerror;\n\n    var newHandler = function (msg, url, line) {\n      _rawLog({\n        error: msg,\n        line: line,\n        location: url\n      }).level(\"ERROR\").send();\n\n      if (oldHandler) {\n        return oldHandler(msg, url, line);\n      } else {\n        return false;\n      }\n    };\n\n    window.onerror = newHandler;\n  }\n  /** @expose */\n\n\n  this.log = _rawLog;\n}\n/**\n * A single log object\n * @constructor\n * @param {Object} options\n */\n\n\nfunction Logger(options) {\n  var logger; // Default values\n\n  var dict = {\n    ssl: true,\n    catchall: false,\n    trace: true,\n    page_info: \"never\",\n    print: false,\n    endpoint: null,\n    token: null\n  };\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];else throw new Error(\"Invalid parameters for createLogStream()\");\n\n  if (dict.token === null) {\n    throw new Error(\"Token not present.\");\n  } else {\n    logger = new LogStream(dict);\n  }\n\n  var _log = function (msg) {\n    if (logger) {\n      return logger.log.apply(this, arguments);\n    } else throw new Error(\"You must call LE.init(...) first.\");\n  }; // The public interface\n\n\n  return {\n    log: function () {\n      _log.apply(this, arguments).level(\"LOG\").send();\n    },\n    warn: function () {\n      _log.apply(this, arguments).level(\"WARN\").send();\n    },\n    error: function () {\n      _log.apply(this, arguments).level(\"ERROR\").send();\n    },\n    info: function () {\n      _log.apply(this, arguments).level(\"INFO\").send();\n    }\n  };\n} // Array of Logger elements\n\n\nvar loggers = {};\n\nvar _getLogger = function (name) {\n  if (!loggers.hasOwnProperty(name)) throw new Error(\"Invalid name for logStream\");\n  return loggers[name];\n};\n\nvar _createLogStream = function (options) {\n  if (typeof options.name !== \"string\") throw new Error(\"Name not present.\");else if (loggers.hasOwnProperty(options.name)) throw new Error(\"A logger with that name already exists!\");\n  loggers[options.name] = new Logger(options);\n  return true;\n};\n\nvar _deprecatedInit = function (options) {\n  var dict = {\n    name: \"default\"\n  };\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];else if (typeof options === \"string\") dict.token = options;else throw new Error(\"Invalid parameters for init()\");\n  return _createLogStream(dict);\n};\n\nvar _destroyLogStream = function (name) {\n  if (typeof name === \"undefined\") {\n    name = \"default\";\n  }\n\n  delete loggers[name];\n}; // The public interface\n\n\nexport default {\n  init: _deprecatedInit,\n  createLogStream: _createLogStream,\n  to: _getLogger,\n  destroy: _destroyLogStream,\n  log: function () {\n    for (var k in loggers) loggers[k].log.apply(this, arguments);\n  },\n  warn: function () {\n    for (var k in loggers) loggers[k].warn.apply(this, arguments);\n  },\n  error: function () {\n    for (var k in loggers) loggers[k].error.apply(this, arguments);\n  },\n  info: function () {\n    for (var k in loggers) loggers[k].info.apply(this, arguments);\n  }\n};","map":{"version":3,"sources":["/home/amax/Autoro/cabana/src/logging/LogEntries.js"],"names":["window","self","_indexOf","array","obj","i","length","_getAjaxObject","XDomainRequest","XMLHttpRequest","LogStream","options","_traceCode","trace","Math","random","PI","toString","substring","_pageInfo","page_info","_token","token","_print","print","_noFormat","no_format","_SSL","ssl","location","protocol","_endpoint","LEENDPOINT","_shouldCall","_backlog","_active","_sentPageInfo","_apiCall","data","request","constructor","onreadystatechange","readyState","status","console","error","warn","shift","onload","open","setRequestHeader","overrideMimeType","send","_getEvent","raw","args","Array","prototype","slice","call","arguments","Error","_agentInfo","nav","navigator","doNotTrack","undefined","screen","url","pathname","referrer","document","width","height","innerWidth","innerHeight","browser","name","appName","version","appVersion","cookie_enabled","cookieEnabled","do_not_track","platform","_rawLog","msg","event","apply","level","l","serialized","toLowerCase","ex","log","cache","JSON","stringify","key","value","push","catchall","oldHandler","onerror","newHandler","line","Logger","logger","dict","endpoint","k","_log","info","loggers","_getLogger","hasOwnProperty","_createLogStream","_deprecatedInit","_destroyLogStream","init","createLogStream","to","destroy"],"mappings":"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","sourcesContent":["// Vendored from https://github.com/rapid7/le_js, which is broken with webpack.\n/* eslint-disable */\n\nif (typeof window === \"undefined\") {\n  // eslint-disable-line no-use-before-define\n  var window = self;\n}\nvar _indexOf = function(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (obj === array[i]) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n// Obtain a browser-specific XHR object\nvar _getAjaxObject = function() {\n  if (typeof XDomainRequest !== \"undefined\") {\n    // We're using IE8/9\n    return new XDomainRequest();\n  }\n  return new XMLHttpRequest();\n};\n\n/**\n * A single log event stream.\n * @constructor\n * @param {Object} options\n */\nfunction LogStream(options) {\n  /**\n   * @const\n   * @type {string} */\n  var _traceCode = options.trace\n    ? (Math.random() + Math.PI).toString(36).substring(2, 10)\n    : null;\n  /** @type {string} */\n  var _pageInfo = options.page_info;\n  /** @type {string} */\n  var _token = options.token;\n  /** @type {boolean} */\n  var _print = options.print;\n  /** @type {boolean} */\n  var _noFormat = options.no_format;\n  /** @type {boolean} */\n  var _SSL = (function() {\n    if (typeof XDomainRequest === \"undefined\") {\n      return options.ssl;\n    }\n    // If we're relying on XDomainRequest, we\n    // must adhere to the page's encryption scheme.\n    return window.location.protocol === \"https:\" ? true : false;\n  })();\n  /** @type {string} */\n  var _endpoint;\n  if (window.LEENDPOINT) {\n    _endpoint = window.LEENDPOINT;\n  } else if (_noFormat) {\n    _endpoint = \"webhook.logentries.com/noformat\";\n  } else {\n    _endpoint = \"js.logentries.com/v1\";\n  }\n  _endpoint = (_SSL ? \"https://\" : \"http://\") + _endpoint + \"/logs/\" + _token;\n\n  /**\n   * Flag to prevent further invocations on network err\n   ** @type {boolean} */\n  var _shouldCall = true;\n  /** @type {Array.<string>} */\n  var _backlog = [];\n  /** @type {boolean} */\n  var _active = false;\n  /** @type {boolean} */\n  var _sentPageInfo = false;\n\n  var _apiCall = function(token, data) {\n    _active = true;\n\n    var request = _getAjaxObject();\n\n    if (_shouldCall) {\n      if (request.constructor === XMLHttpRequest) {\n        // Currently we don't support fine-grained error\n        // handling in older versions of IE\n        request.onreadystatechange = function() {\n          if (request.readyState === 4) {\n            // Handle any errors\n            if (request.status >= 400) {\n              console.error(\"Couldn't submit events.\");\n              if (request.status === 410) {\n                // This API version has been phased out\n                console.warn(\"This version of le_js is no longer supported!\");\n              }\n            } else {\n              if (request.status === 301) {\n                // Server issued a deprecation warning\n                console.warn(\n                  \"This version of le_js is deprecated! Consider upgrading.\"\n                );\n              }\n              if (_backlog.length > 0) {\n                // Submit the next event in the backlog\n                _apiCall(token, _backlog.shift());\n              } else {\n                _active = false;\n              }\n            }\n          }\n        };\n      } else {\n        request.onload = function() {\n          if (_backlog.length > 0) {\n            // Submit the next event in the backlog\n            _apiCall(token, _backlog.shift());\n          } else {\n            _active = false;\n          }\n        };\n      }\n\n      request.open(\"POST\", _endpoint, true);\n      if (request.constructor === XMLHttpRequest) {\n        request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n        request.setRequestHeader(\"Content-type\", \"application/json\");\n      }\n\n      if (request.overrideMimeType) {\n        request.overrideMimeType(\"text\");\n      }\n\n      request.send(data);\n    }\n  };\n\n  var _getEvent = function() {\n    var raw = null;\n    var args = Array.prototype.slice.call(arguments);\n    if (args.length === 0) {\n      throw new Error(\"No arguments!\");\n    } else if (args.length === 1) {\n      raw = args[0];\n    } else {\n      // Handle a variadic overload,\n      // e.g. _rawLog(\"some text \", x, \" ...\", 1);\n      raw = args;\n    }\n    return raw;\n  };\n\n  var _agentInfo = function() {\n    var nav = window.navigator || { doNotTrack: undefined };\n    var screen = window.screen || {};\n    var location = window.location || {};\n\n    return {\n      url: location.pathname,\n      referrer: document.referrer,\n      screen: {\n        width: screen.width,\n        height: screen.height\n      },\n      window: {\n        width: window.innerWidth,\n        height: window.innerHeight\n      },\n      browser: {\n        name: nav.appName,\n        version: nav.appVersion,\n        cookie_enabled: nav.cookieEnabled,\n        do_not_track: nav.doNotTrack\n      },\n      platform: nav.platform\n    };\n  };\n\n  // Single arg stops the compiler arity warning\n  var _rawLog = function(msg) {\n    var event = _getEvent.apply(this, arguments);\n\n    var data = { event: event };\n\n    // Add agent info if required\n    if (_pageInfo !== \"never\") {\n      if (!_sentPageInfo || _pageInfo === \"per-entry\") {\n        _sentPageInfo = true;\n        if (\n          typeof event.screen === \"undefined\" &&\n          typeof event.browser === \"undefined\"\n        )\n          _rawLog(_agentInfo())\n            .level(\"PAGE\")\n            .send();\n      }\n    }\n\n    if (_traceCode) {\n      data.trace = _traceCode;\n    }\n\n    return {\n      level: function(l) {\n        // Don't log PAGE events to console\n        // PAGE events are generated for the agentInfo function\n        if (_print && typeof console !== \"undefined\" && l !== \"PAGE\") {\n          var serialized = null;\n          if (typeof XDomainRequest !== \"undefined\") {\n            // We're using IE8/9\n            serialized = data.trace + \" \" + data.event;\n          }\n          try {\n            console[l.toLowerCase()].call(console, serialized || data);\n          } catch (ex) {\n            // IE compat fix\n            console.log(serialized || data);\n          }\n        }\n        data.level = l;\n\n        return {\n          send: function() {\n            var cache = [];\n            var serialized = JSON.stringify(data, function(key, value) {\n              if (typeof value === \"undefined\") {\n                return \"undefined\";\n              } else if (typeof value === \"object\" && value !== null) {\n                if (_indexOf(cache, value) !== -1) {\n                  // We've seen this object before;\n                  // return a placeholder instead to prevent\n                  // cycles\n                  return \"<?>\";\n                }\n                cache.push(value);\n              }\n              return value;\n            });\n\n            if (_active) {\n              _backlog.push(serialized);\n            } else {\n              _apiCall(_token, serialized);\n            }\n          }\n        };\n      }\n    };\n  };\n\n  if (options.catchall) {\n    var oldHandler = window.onerror;\n    var newHandler = function(msg, url, line) {\n      _rawLog({ error: msg, line: line, location: url })\n        .level(\"ERROR\")\n        .send();\n      if (oldHandler) {\n        return oldHandler(msg, url, line);\n      } else {\n        return false;\n      }\n    };\n    window.onerror = newHandler;\n  }\n\n  /** @expose */\n  this.log = _rawLog;\n}\n\n/**\n * A single log object\n * @constructor\n * @param {Object} options\n */\nfunction Logger(options) {\n  var logger;\n\n  // Default values\n  var dict = {\n    ssl: true,\n    catchall: false,\n    trace: true,\n    page_info: \"never\",\n    print: false,\n    endpoint: null,\n    token: null\n  };\n\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];\n  else throw new Error(\"Invalid parameters for createLogStream()\");\n\n  if (dict.token === null) {\n    throw new Error(\"Token not present.\");\n  } else {\n    logger = new LogStream(dict);\n  }\n\n  var _log = function(msg) {\n    if (logger) {\n      return logger.log.apply(this, arguments);\n    } else throw new Error(\"You must call LE.init(...) first.\");\n  };\n\n  // The public interface\n  return {\n    log: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"LOG\")\n        .send();\n    },\n    warn: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"WARN\")\n        .send();\n    },\n    error: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"ERROR\")\n        .send();\n    },\n    info: function() {\n      _log\n        .apply(this, arguments)\n        .level(\"INFO\")\n        .send();\n    }\n  };\n}\n\n// Array of Logger elements\nvar loggers = {};\n\nvar _getLogger = function(name) {\n  if (!loggers.hasOwnProperty(name))\n    throw new Error(\"Invalid name for logStream\");\n\n  return loggers[name];\n};\n\nvar _createLogStream = function(options) {\n  if (typeof options.name !== \"string\") throw new Error(\"Name not present.\");\n  else if (loggers.hasOwnProperty(options.name))\n    throw new Error(\"A logger with that name already exists!\");\n  loggers[options.name] = new Logger(options);\n\n  return true;\n};\n\nvar _deprecatedInit = function(options) {\n  var dict = {\n    name: \"default\"\n  };\n\n  if (typeof options === \"object\") for (var k in options) dict[k] = options[k];\n  else if (typeof options === \"string\") dict.token = options;\n  else throw new Error(\"Invalid parameters for init()\");\n\n  return _createLogStream(dict);\n};\n\nvar _destroyLogStream = function(name) {\n  if (typeof name === \"undefined\") {\n    name = \"default\";\n  }\n\n  delete loggers[name];\n};\n\n// The public interface\nexport default {\n  init: _deprecatedInit,\n  createLogStream: _createLogStream,\n  to: _getLogger,\n  destroy: _destroyLogStream,\n  log: function() {\n    for (var k in loggers) loggers[k].log.apply(this, arguments);\n  },\n  warn: function() {\n    for (var k in loggers) loggers[k].warn.apply(this, arguments);\n  },\n  error: function() {\n    for (var k in loggers) loggers[k].error.apply(this, arguments);\n  },\n  info: function() {\n    for (var k in loggers) loggers[k].info.apply(this, arguments);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}