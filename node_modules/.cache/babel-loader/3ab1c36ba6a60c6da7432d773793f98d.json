{"ast":null,"code":"export default {\n  \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n  \"width\": 500,\n  \"height\": 212,\n  \"autosize\": \"none\",\n  \"padding\": {\n    \"top\": 5,\n    \"left\": 70,\n    \"right\": 20,\n    \"bottom\": 20\n  },\n  \"data\": [{\n    \"name\": \"table\"\n  }, {\n    \"name\": \"segment\"\n  }, {\n    \"name\": \"tooltip\",\n    \"source\": \"table\",\n    \"transform\": [{\n      \"type\": \"filter\",\n      \"expr\": \"abs(datum.relTime - tipTime) <= 0.05\"\n    }, {\n      \"type\": \"aggregate\",\n      \"groupby\": [\"color\"],\n      \"fields\": [\"relTime\", \"y\", \"unit\"],\n      \"ops\": [\"min\", \"argmin\", \"argmin\"],\n      \"as\": [\"min\", \"argmin\", \"argmin\"]\n    }]\n  }, {\n    \"name\": \"ySegmentScale\",\n    \"source\": \"table\",\n    \"transform\": [{\n      \"type\": \"filter\",\n      \"expr\": \"length(segment) != 2 || (datum.relTime >= segment[0] && datum.relTime <= segment[1])\"\n    }, {\n      \"type\": \"extent\",\n      \"field\": \"y\",\n      \"signal\": \"ySegment\"\n    }]\n  }],\n  \"scales\": [{\n    \"name\": \"xscale\",\n    \"type\": \"linear\",\n    \"range\": \"width\",\n    \"domain\": {\n      \"data\": \"table\",\n      \"field\": \"x\"\n    },\n    \"zero\": false\n  }, {\n    \"name\": \"xrelscale\",\n    \"type\": \"linear\",\n    \"range\": \"width\",\n    \"domain\": {\n      \"data\": \"table\",\n      \"field\": \"relTime\"\n    },\n    \"zero\": false,\n    \"clamp\": true,\n    \"nice\": true,\n    \"domainRaw\": {\n      \"signal\": \"segment\"\n    }\n  }, {\n    \"name\": \"yscale\",\n    \"type\": \"linear\",\n    \"range\": \"height\",\n    \"clamp\": true,\n    \"zero\": false,\n    \"nice\": true,\n    \"domain\": {\n      \"signal\": \"ySegment\"\n    }\n  }, {\n    \"name\": \"color\",\n    \"type\": \"ordinal\",\n    \"domain\": {\n      \"data\": \"table\",\n      \"field\": \"color\"\n    },\n    \"range\": {\n      \"data\": \"table\",\n      \"field\": \"color\"\n    }\n  }],\n  \"axes\": [{\n    \"orient\": \"bottom\",\n    \"scale\": \"xrelscale\",\n    \"labelOverlap\": true\n  }, {\n    \"orient\": \"left\",\n    \"scale\": \"yscale\",\n    \"format\": \".6~g\"\n  }],\n  \"signals\": [{\n    \"name\": \"tipTime\",\n    \"on\": [{\n      \"events\": \"mousemove\",\n      \"update\": \"invert('xrelscale', x())\"\n    }, {\n      \"events\": \"mouseout\",\n      \"update\": \"null\"\n    }]\n  }, {\n    \"name\": \"clickTime\",\n    \"on\": [{\n      \"events\": \"click\",\n      \"update\": \"invert('xrelscale', x())\"\n    }]\n  }, {\n    \"name\": \"videoTime\"\n  }, {\n    \"name\": \"segment\",\n    \"value\": {\n      \"data\": \"table\",\n      \"field\": \"relTime\"\n    }\n  }],\n  \"marks\": [{\n    \"type\": \"group\",\n    \"name\": \"plot\",\n    \"interactive\": true,\n    \"encode\": {\n      \"enter\": {\n        \"width\": {\n          \"signal\": \"width\"\n        },\n        \"height\": {\n          \"signal\": \"height\"\n        },\n        \"fill\": {\n          \"value\": \"transparent\"\n        }\n      }\n    },\n    \"signals\": [{\n      \"name\": \"brush\",\n      \"value\": 0,\n      \"on\": [{\n        \"events\": \"@boundingRect:mousedown\",\n        \"update\": \"[x(), x()]\"\n      }, {\n        \"events\": \"[@boundingRect:mousedown, window:mouseup] > window:mousemove!\",\n        \"update\": \"[brush[0], clamp(x(), 0, width)]\"\n      }, {\n        \"events\": {\n          \"signal\": \"delta\"\n        },\n        \"update\": \"clampRange([anchor[0] + delta, anchor[1] + delta], 0, width)\"\n      }]\n    }, {\n      \"name\": \"anchor\",\n      \"value\": null,\n      \"on\": [{\n        \"events\": \"@brush:mousedown\",\n        \"update\": \"slice(brush)\"\n      }]\n    }, {\n      \"name\": \"xdown\",\n      \"value\": 0,\n      \"on\": [{\n        \"events\": \"@brush:mousedown\",\n        \"update\": \"x()\"\n      }]\n    }, {\n      \"name\": \"xup\",\n      \"value\": 0,\n      \"on\": [{\n        \"events\": \"@brush:mouseup\",\n        \"update\": \"x()\"\n      }]\n    }, {\n      \"name\": \"delta\",\n      \"value\": 0,\n      \"on\": [{\n        \"events\": \"[@brush:mousedown, window:mouseup] > window:mousemove!\",\n        \"update\": \"x() - xdown\"\n      }]\n    }, {\n      \"name\": \"segment\",\n      \"push\": \"outer\",\n      \"on\": [{\n        \"events\": \"window:mouseup\",\n        \"update\": \"span(brush) && span(brush) > 15 ? invert('xrelscale', brush) : segment\"\n      }]\n    }],\n    \"marks\": [{\n      \"type\": \"group\",\n      \"from\": {\n        \"facet\": {\n          \"name\": \"series\",\n          \"data\": \"table\",\n          \"groupby\": \"signalUid\"\n        }\n      },\n      \"marks\": [{\n        \"type\": \"line\",\n        \"name\": \"lineMark\",\n        \"from\": {\n          \"data\": \"series\"\n        },\n        \"interactive\": true,\n        \"encode\": {\n          \"update\": {\n            \"value\": \"natural\",\n            \"tension\": 0,\n            \"x\": {\n              \"scale\": \"xrelscale\",\n              \"field\": \"relTime\"\n            },\n            \"y\": {\n              \"scale\": \"yscale\",\n              \"field\": \"y\"\n            },\n            \"detail\": {\n              \"field\": \"signalUid\"\n            }\n          },\n          \"hover\": {\n            \"fillOpacity\": {\n              \"value\": 0.5\n            }\n          },\n          \"enter\": {\n            \"clip\": {\n              \"value\": true\n            },\n            \"stroke\": {\n              \"scale\": \"color\",\n              \"field\": \"color\"\n            },\n            \"strokeWidth\": {\n              \"value\": 2\n            }\n          }\n        }\n      }]\n    }, {\n      \"type\": \"rect\",\n      \"interactive\": true,\n      \"name\": \"brush\",\n      \"encode\": {\n        \"enter\": {\n          \"y\": {\n            \"value\": 0\n          },\n          \"height\": {\n            \"signal\": \"height\"\n          },\n          \"fill\": {\n            \"value\": \"#333\"\n          },\n          \"fillOpacity\": {\n            \"value\": 0.2\n          }\n        },\n        \"update\": {\n          \"x\": {\n            \"signal\": \"brush[0]\"\n          },\n          \"x2\": {\n            \"signal\": \"brush[1]\"\n          }\n        }\n      }\n    }, {\n      \"type\": \"rule\",\n      \"encode\": {\n        \"update\": {\n          \"y\": {\n            \"value\": 0\n          },\n          \"y2\": {\n            \"field\": {\n              \"group\": \"height\"\n            }\n          },\n          \"stroke\": {\n            \"value\": \"#000\"\n          },\n          \"strokeWidth\": {\n            \"value\": 2\n          },\n          \"x\": {\n            \"scale\": \"xrelscale\",\n            \"signal\": \"videoTime\",\n            \"offset\": 0.5\n          }\n        }\n      }\n    }, {\n      \"type\": \"symbol\",\n      \"from\": {\n        \"data\": \"tooltip\"\n      },\n      \"encode\": {\n        \"update\": {\n          \"x\": {\n            \"scale\": \"xrelscale\",\n            \"field\": \"argmin.relTime\"\n          },\n          \"y\": {\n            \"scale\": \"yscale\",\n            \"field\": \"argmin.y\"\n          },\n          \"size\": {\n            \"value\": 50\n          },\n          \"fill\": {\n            \"value\": \"black\"\n          }\n        }\n      }\n    }, {\n      \"type\": \"group\",\n      \"from\": {\n        \"data\": \"tooltip\"\n      },\n      \"interactive\": false,\n      \"name\": \"tooltipGroup\",\n      \"encode\": {\n        \"update\": {\n          \"x\": [{\n            \"test\": \"inrange(datum.argmin.relTime + 80, domain('xrelscale'))\",\n            \"scale\": \"xrelscale\",\n            \"field\": \"argmin.relTime\"\n          }, {\n            \"scale\": \"xrelscale\",\n            \"field\": \"argmin.relTime\",\n            \"offset\": -80\n          }],\n          \"y\": {\n            \"scale\": \"yscale\",\n            \"field\": \"argmin.y\"\n          },\n          \"height\": {\n            \"value\": 20\n          },\n          \"width\": {\n            \"value\": 80\n          },\n          \"fill\": {\n            \"value\": \"#fff\"\n          },\n          \"fillOpacity\": {\n            \"value\": 0.85\n          },\n          \"stroke\": {\n            \"value\": \"#aaa\"\n          },\n          \"strokeWidth\": {\n            \"value\": 0.5\n          }\n        }\n      },\n      \"marks\": [{\n        \"type\": \"text\",\n        \"interactive\": false,\n        \"encode\": {\n          \"update\": {\n            \"text\": {\n              \"signal\": \"format(parent.argmin.relTime, ',.2f') + ': ' + format(parent.argmin.y, ',.2f') + ' ' + parent.argmin.unit\"\n            },\n            \"fill\": {\n              \"value\": \"black\"\n            },\n            \"fontWeight\": {\n              \"value\": \"bold\"\n            },\n            \"y\": {\n              \"value\": 20\n            }\n          }\n        }\n      }]\n    }, {\n      \"type\": \"rect\",\n      \"name\": \"boundingRect\",\n      \"interactive\": true,\n      \"encode\": {\n        \"enter\": {\n          \"width\": {\n            \"signal\": \"width\"\n          },\n          \"height\": {\n            \"signal\": \"height\"\n          },\n          \"fill\": {\n            \"value\": \"transparent\"\n          }\n        }\n      }\n    }]\n  }]\n};","map":{"version":3,"sources":["/home/amax/Autoro/cabana/src/vega/CanPlot.js"],"names":[],"mappings":"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","sourcesContent":["export default {\n  \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n  \"width\": 500,\n  \"height\": 212,\n  \"autosize\": \"none\",\n  \"padding\": {\n    \"top\": 5,\n    \"left\": 70,\n    \"right\": 20,\n    \"bottom\": 20\n  },\n  \"data\": [\n    {\n      \"name\": \"table\"\n    },\n    {\n      \"name\": \"segment\"\n    },\n    {\n      \"name\": \"tooltip\",\n      \"source\": \"table\",\n      \"transform\": [\n        {\n          \"type\": \"filter\",\n          \"expr\": \"abs(datum.relTime - tipTime) <= 0.05\"\n        },\n        {\n          \"type\": \"aggregate\",\n          \"groupby\": [\"color\"],\n          \"fields\": [\n            \"relTime\",\n            \"y\",\n            \"unit\"\n          ],\n          \"ops\": [\n            \"min\",\n            \"argmin\",\n            \"argmin\"\n          ],\n          \"as\": [\n            \"min\",\n            \"argmin\",\n            \"argmin\"\n          ]\n        }\n      ]\n    },\n    {\n      \"name\": \"ySegmentScale\",\n      \"source\": \"table\",\n      \"transform\": [\n        {\n          \"type\": \"filter\",\n          \"expr\": \"length(segment) != 2 || (datum.relTime >= segment[0] && datum.relTime <= segment[1])\"\n        },\n        {\n          \"type\": \"extent\",\n          \"field\": \"y\",\n          \"signal\": \"ySegment\"\n        }\n      ]\n    }\n  ],\n\n  \"scales\": [\n    {\n      \"name\": \"xscale\",\n      \"type\": \"linear\",\n      \"range\": \"width\",\n      \"domain\": {\n        \"data\": \"table\",\n        \"field\": \"x\"\n      },\n      \"zero\": false\n    },\n    {\n      \"name\": \"xrelscale\",\n      \"type\": \"linear\",\n      \"range\": \"width\",\n      \"domain\": {\n        \"data\": \"table\",\n        \"field\": \"relTime\"\n      },\n      \"zero\": false,\n      \"clamp\": true,\n      \"nice\": true,\n      \"domainRaw\": {\n        \"signal\": \"segment\"\n      }\n    },\n    {\n      \"name\": \"yscale\",\n      \"type\": \"linear\",\n      \"range\": \"height\",\n      \"clamp\": true,\n      \"zero\": false,\n      \"nice\": true,\n      \"domain\": {\n        \"signal\": \"ySegment\"\n      }\n    },\n    {\n      \"name\": \"color\",\n      \"type\": \"ordinal\",\n      \"domain\": {\n        \"data\": \"table\",\n        \"field\": \"color\"\n      },\n      \"range\": {\n        \"data\": \"table\",\n        \"field\": \"color\"\n      }\n    }\n  ],\n\n\n  \"axes\": [\n    {\n      \"orient\": \"bottom\",\n      \"scale\": \"xrelscale\",\n      \"labelOverlap\": true\n    },\n    {\n      \"orient\": \"left\",\n      \"scale\": \"yscale\",\n      \"format\": \".6~g\"\n    }\n  ],\n\n  \"signals\": [\n    {\n      \"name\": \"tipTime\",\n      \"on\": [\n        {\n          \"events\": \"mousemove\",\n          \"update\": \"invert('xrelscale', x())\"\n        },\n        {\n          \"events\": \"mouseout\",\n          \"update\": \"null\"\n        }\n      ]\n    },\n    {\n      \"name\": \"clickTime\",\n      \"on\": [\n        {\n          \"events\": \"click\",\n          \"update\": \"invert('xrelscale', x())\"\n        }\n      ]\n    },\n    {\n      \"name\": \"videoTime\"\n    },\n    {\n      \"name\": \"segment\",\n      \"value\": {\n        \"data\": \"table\",\n        \"field\": \"relTime\"\n      }\n    }\n  ],\n\n  \"marks\": [\n    {\n      \"type\": \"group\",\n      \"name\": \"plot\",\n      \"interactive\": true,\n      \"encode\": {\n        \"enter\": {\n          \"width\": {\n            \"signal\": \"width\"\n          },\n          \"height\": {\n            \"signal\": \"height\"\n          },\n          \"fill\": {\n            \"value\": \"transparent\"\n          }\n        }\n      },\n      \"signals\": [\n        {\n          \"name\": \"brush\",\n          \"value\": 0,\n          \"on\": [\n            {\n              \"events\": \"@boundingRect:mousedown\",\n              \"update\": \"[x(), x()]\"\n            },\n            {\n              \"events\": \"[@boundingRect:mousedown, window:mouseup] > window:mousemove!\",\n              \"update\": \"[brush[0], clamp(x(), 0, width)]\"\n            },\n            {\n              \"events\": {\n                \"signal\": \"delta\"\n              },\n              \"update\": \"clampRange([anchor[0] + delta, anchor[1] + delta], 0, width)\"\n            }\n          ]\n        },\n        {\n          \"name\": \"anchor\",\n          \"value\": null,\n          \"on\": [\n            {\n              \"events\": \"@brush:mousedown\",\n              \"update\": \"slice(brush)\"\n            }\n          ]\n        },\n        {\n          \"name\": \"xdown\",\n          \"value\": 0,\n          \"on\": [\n            {\n              \"events\": \"@brush:mousedown\",\n              \"update\": \"x()\"\n            }\n          ]\n        },\n        {\n          \"name\": \"xup\",\n          \"value\": 0,\n          \"on\": [\n            {\n              \"events\": \"@brush:mouseup\",\n              \"update\": \"x()\"\n            }\n          ]\n        },\n        {\n          \"name\": \"delta\",\n          \"value\": 0,\n          \"on\": [\n            {\n              \"events\": \"[@brush:mousedown, window:mouseup] > window:mousemove!\",\n              \"update\": \"x() - xdown\"\n            }\n          ]\n        },\n        {\n          \"name\": \"segment\",\n          \"push\": \"outer\",\n          \"on\": [\n            {\n              \"events\": \"window:mouseup\",\n              \"update\": \"span(brush) && span(brush) > 15 ? invert('xrelscale', brush) : segment\"\n            }\n          ]\n        }\n      ],\n      \"marks\": [\n        {\n          \"type\": \"group\",\n          \"from\": {\n            \"facet\": {\n              \"name\": \"series\",\n              \"data\": \"table\",\n              \"groupby\": \"signalUid\"\n            }\n          },\n          \"marks\": [{\n            \"type\": \"line\",\n            \"name\": \"lineMark\",\n            \"from\": {\n              \"data\": \"series\"\n            },\n            \"interactive\": true,\n            \"encode\": {\n              \"update\": {\n                \"value\": \"natural\",\n                \"tension\": 0,\n                \"x\": {\n                  \"scale\": \"xrelscale\",\n                  \"field\": \"relTime\"\n                },\n                \"y\": {\n                  \"scale\": \"yscale\",\n                  \"field\": \"y\"\n                },\n                \"detail\": {\n                  \"field\": \"signalUid\"\n                }\n              },\n              \"hover\": {\n                \"fillOpacity\": {\n                  \"value\": 0.5\n                }\n              },\n              \"enter\": {\n                \"clip\": {\n                  \"value\": true\n                },\n                \"stroke\": {\n                  \"scale\": \"color\",\n                  \"field\": \"color\"\n                },\n                \"strokeWidth\": {\n                  \"value\": 2\n                }\n              }\n            }\n          }]\n        },\n        {\n          \"type\": \"rect\",\n          \"interactive\": true,\n          \"name\": \"brush\",\n          \"encode\": {\n            \"enter\": {\n              \"y\": {\n                \"value\": 0\n              },\n              \"height\": {\n                \"signal\": \"height\"\n              },\n              \"fill\": {\n                \"value\": \"#333\"\n              },\n              \"fillOpacity\": {\n                \"value\": 0.2\n              }\n            },\n            \"update\": {\n              \"x\": {\n                \"signal\": \"brush[0]\"\n              },\n              \"x2\": {\n                \"signal\": \"brush[1]\"\n              }\n            }\n          }\n        },\n        {\n          \"type\": \"rule\",\n          \"encode\": {\n            \"update\": {\n              \"y\": {\n                \"value\": 0\n              },\n              \"y2\": {\n                \"field\": {\n                  \"group\": \"height\"\n                }\n              },\n              \"stroke\": {\n                \"value\": \"#000\"\n              },\n              \"strokeWidth\": {\n                \"value\": 2\n              },\n              \"x\": {\n                \"scale\": \"xrelscale\",\n                \"signal\": \"videoTime\",\n                \"offset\": 0.5\n              }\n            }\n          }\n        },\n        {\n          \"type\": \"symbol\",\n          \"from\": {\n            \"data\": \"tooltip\"\n          },\n          \"encode\": {\n            \"update\": {\n              \"x\": {\n                \"scale\": \"xrelscale\",\n                \"field\": \"argmin.relTime\"\n              },\n              \"y\": {\n                \"scale\": \"yscale\",\n                \"field\": \"argmin.y\"\n              },\n              \"size\": {\n                \"value\": 50\n              },\n              \"fill\": {\n                \"value\": \"black\"\n              }\n            }\n          }\n        },\n        {\n          \"type\": \"group\",\n          \"from\": {\n            \"data\": \"tooltip\"\n          },\n          \"interactive\": false,\n          \"name\": \"tooltipGroup\",\n          \"encode\": {\n            \"update\": {\n              \"x\": [\n                {\n                  \"test\": \"inrange(datum.argmin.relTime + 80, domain('xrelscale'))\",\n                  \"scale\": \"xrelscale\",\n                  \"field\": \"argmin.relTime\"\n                },\n                {\n                  \"scale\": \"xrelscale\",\n                  \"field\": \"argmin.relTime\",\n                  \"offset\": -80\n                }\n              ],\n              \"y\": {\n                \"scale\": \"yscale\",\n                \"field\": \"argmin.y\"\n              },\n              \"height\": {\n                \"value\": 20\n              },\n              \"width\": {\n                \"value\": 80\n              },\n              \"fill\": {\n                \"value\": \"#fff\"\n              },\n              \"fillOpacity\": {\n                \"value\": 0.85\n              },\n              \"stroke\": {\n                \"value\": \"#aaa\"\n              },\n              \"strokeWidth\": {\n                \"value\": 0.5\n              }\n            }\n          },\n          \"marks\": [\n            {\n              \"type\": \"text\",\n              \"interactive\": false,\n              \"encode\": {\n                \"update\": {\n                  \"text\": {\n                    \"signal\": \"format(parent.argmin.relTime, ',.2f') + ': ' + format(parent.argmin.y, ',.2f') + ' ' + parent.argmin.unit\"\n                  },\n                  \"fill\": {\n                    \"value\": \"black\"\n                  },\n                  \"fontWeight\": {\n                    \"value\": \"bold\"\n                  },\n                  \"y\": {\n                    \"value\": 20\n                  }\n                }\n              }\n            }\n          ]\n        },\n        {\n          \"type\": \"rect\",\n          \"name\": \"boundingRect\",\n          \"interactive\": true,\n          \"encode\": {\n            \"enter\": {\n              \"width\": {\n                \"signal\": \"width\"\n              },\n              \"height\": {\n                \"signal\": \"height\"\n              },\n              \"fill\": {\n                \"value\": \"transparent\"\n              }\n            }\n          }\n        }\n      ]\n    }\n  ]\n};\n"]},"metadata":{},"sourceType":"module"}