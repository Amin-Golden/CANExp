{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchLocation = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar fetchLocation = exports.fetchLocation = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(dongleId) {\n    var locationEndpoint, location;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            locationEndpoint = 'v1/devices/' + dongleId + '/location';\n            _context.next = 3;\n            return request.get(locationEndpoint);\n\n          case 3:\n            location = _context.sent;\n\n            if (!(location !== undefined && location.error === undefined)) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt('return', location);\n\n          case 8:\n            throw Error(\"Could not fetch device location: \" + (0, _stringify2.default)(location));\n\n          case 9:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function fetchLocation(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.listDevices = listDevices;\nexports.setDeviceAlias = setDeviceAlias;\nexports.setDeviceVehicleId = setDeviceVehicleId;\nexports.grantDeviceReadPermission = grantDeviceReadPermission;\nexports.removeDeviceReadPermission = removeDeviceReadPermission;\nexports.fetchVehicles = fetchVehicles;\nexports.fetchDevice = fetchDevice;\nexports.pilotPair = pilotPair;\nexports.fetchDeviceStats = fetchDeviceStats;\nexports.unpair = unpair;\nexports.fetchDeviceOwner = fetchDeviceOwner;\nexports.getAthenaQueue = getAthenaQueue;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction listDevices() {\n  return request.get('v1/me/devices/');\n} // Devices API\n// ~~~~~~~~~~~\n\n\nfunction setDeviceAlias(dongle_id, alias) {\n  return request.patch('v1/devices/' + dongle_id + '/', {\n    alias: alias\n  });\n}\n\nfunction setDeviceVehicleId(dongle_id, vehicle_id) {\n  return request.patch('v1/devices/' + dongle_id + '/', {\n    vehicle_id: vehicle_id\n  });\n}\n\nfunction grantDeviceReadPermission(dongle_id, email) {\n  return request.post('v1/devices/' + dongle_id + '/add_user', {\n    email: email\n  });\n}\n\nfunction removeDeviceReadPermission(dongle_id, email) {\n  return request.post('v1/devices/' + dongle_id + '/del_user', {\n    email: email\n  });\n}\n\nfunction fetchVehicles(vehicleId) {\n  var vehicleEndpoint = 'v1/vehicles/' + vehicleId;\n  return request.get(vehicleEndpoint);\n}\n\nfunction fetchDevice(dongleId) {\n  var deviceEndpoint = 'v1.1/devices/' + dongleId + '/';\n  return request.get(deviceEndpoint);\n}\n\nfunction pilotPair(pair_token) {\n  return request.postForm('v2/pilotpair/', {\n    pair_token: pair_token\n  });\n}\n\nfunction fetchDeviceStats(dongleId) {\n  return request.get('v1.1/devices/' + dongleId + '/stats');\n}\n\nfunction unpair(dongleId) {\n  return request.post('v1/devices/' + dongleId + '/unpair');\n}\n\nfunction fetchDeviceOwner(dongleId) {\n  return request.get('v1/devices/' + dongleId + '/owner');\n}\n\nfunction getAthenaQueue(dongleId) {\n  return request.get('v1/devices/' + dongleId + '/athena_offline_queue');\n}","map":{"version":3,"sources":["/home/amax/Autoro/cabana/node_modules/@commaai/comma-api/dist/devices.js"],"names":["Object","defineProperty","exports","value","fetchLocation","undefined","_regenerator","require","_regenerator2","_interopRequireDefault","_stringify","_stringify2","_asyncToGenerator2","_asyncToGenerator3","_ref","default","mark","_callee","dongleId","locationEndpoint","location","wrap","_callee$","_context","prev","next","request","get","sent","error","abrupt","Error","stop","_x","apply","arguments","listDevices","setDeviceAlias","setDeviceVehicleId","grantDeviceReadPermission","removeDeviceReadPermission","fetchVehicles","fetchDevice","pilotPair","fetchDeviceStats","unpair","fetchDeviceOwner","getAthenaQueue","_request","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","dongle_id","alias","patch","vehicle_id","email","post","vehicleId","vehicleEndpoint","deviceEndpoint","pair_token","postForm"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchLocation = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar fetchLocation = exports.fetchLocation = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(dongleId) {\n    var locationEndpoint, location;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            locationEndpoint = 'v1/devices/' + dongleId + '/location';\n            _context.next = 3;\n            return request.get(locationEndpoint);\n\n          case 3:\n            location = _context.sent;\n\n            if (!(location !== undefined && location.error === undefined)) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt('return', location);\n\n          case 8:\n            throw Error(\"Could not fetch device location: \" + (0, _stringify2.default)(location));\n\n          case 9:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function fetchLocation(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.listDevices = listDevices;\nexports.setDeviceAlias = setDeviceAlias;\nexports.setDeviceVehicleId = setDeviceVehicleId;\nexports.grantDeviceReadPermission = grantDeviceReadPermission;\nexports.removeDeviceReadPermission = removeDeviceReadPermission;\nexports.fetchVehicles = fetchVehicles;\nexports.fetchDevice = fetchDevice;\nexports.pilotPair = pilotPair;\nexports.fetchDeviceStats = fetchDeviceStats;\nexports.unpair = unpair;\nexports.fetchDeviceOwner = fetchDeviceOwner;\nexports.getAthenaQueue = getAthenaQueue;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction listDevices() {\n  return request.get('v1/me/devices/');\n} // Devices API\n// ~~~~~~~~~~~\n\nfunction setDeviceAlias(dongle_id, alias) {\n  return request.patch('v1/devices/' + dongle_id + '/', { alias: alias });\n}\n\nfunction setDeviceVehicleId(dongle_id, vehicle_id) {\n  return request.patch('v1/devices/' + dongle_id + '/', { vehicle_id: vehicle_id });\n}\n\nfunction grantDeviceReadPermission(dongle_id, email) {\n  return request.post('v1/devices/' + dongle_id + '/add_user', { email: email });\n}\n\nfunction removeDeviceReadPermission(dongle_id, email) {\n  return request.post('v1/devices/' + dongle_id + '/del_user', { email: email });\n}\n\nfunction fetchVehicles(vehicleId) {\n  var vehicleEndpoint = 'v1/vehicles/' + vehicleId;\n  return request.get(vehicleEndpoint);\n}\n\nfunction fetchDevice(dongleId) {\n  var deviceEndpoint = 'v1.1/devices/' + dongleId + '/';\n  return request.get(deviceEndpoint);\n}\n\nfunction pilotPair(pair_token) {\n  return request.postForm('v2/pilotpair/', { pair_token: pair_token });\n}\n\nfunction fetchDeviceStats(dongleId) {\n  return request.get('v1.1/devices/' + dongleId + '/stats');\n}\n\nfunction unpair(dongleId) {\n  return request.post('v1/devices/' + dongleId + '/unpair');\n}\n\nfunction fetchDeviceOwner(dongleId) {\n  return request.get('v1/devices/' + dongleId + '/owner');\n}\n\nfunction getAthenaQueue(dongleId) {\n  return request.get('v1/devices/' + dongleId + '/athena_offline_queue');\n}"]},"metadata":{},"sourceType":"script"}